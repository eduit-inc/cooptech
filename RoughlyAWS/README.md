# ざっくり解説AWS

## ターゲット
- AWSの詳しいことはわからないけど、用語や概要は知っておきたい人
- または、AWSの環境構築している人の話がわかるようになりたい人

## 概要

普段利用する機会の多いと思われるサービスの紹介。

VPCとオンプレを接続するDirect系は説明しません。

## ネットワークサービス

### AWS

AWSそのもの。あらゆるサービスを内包している

### リージョン

リージョンは世界中にAWSが保有しているデータセンターのこと。日本には、東京（ap-northeast-1）と大阪（ap-northeast-3）が存在する。

2024年2月現在、世界に32のリージョンを保有している。

日本のシステムでは東京リージョンが選択されることが多い。

### アベイラビリティーゾーン

AZと呼称される。

高可用性を満たすために、一つのリージョンの中でも同じ環境を複数AZに構築することが多い。

東京は以下の4つのAZが存在する。
- ap-northeast-1a
- ap-northeast-1c
- ap-northeast-1d
- ap-northeast-1e

### エッジロケーション
CDNを配置している拠点のこと。

AZを上回る数が存在している。CDNをはいちすることで、地理的に近いエッジロケーションを選択し、効率よくコンテンツを配布できる。

### VPC (Virtual Private Cloud)

ネットワーク環境の構築において一番広い単位。

AWSのハードウェアは全ユーザで共有されるものだが、それを「VPC」と呼ばれる仮想ネットワークを作成し
論理って気に分割する。分割されたネットワークは特定のユーザのみが利用できる**プライベートネットワーク**となる。

プライベートネットワークなので、ネットワークのセキュリティを確保することができる。VPC作成当初は誰も繋げない。

ざっくりなので細かくは記載しないが、後述するサブネットも同様に**CIDR**表記でネットワークを構築する点に注意。
CIDRの知識が必要。

### サブネット

VPC内に構築するネットワークのセグメント。ユーザーはどのサブネットをどのAZに構成するかを決められる。
また、1つのVPCに複数のサブネットを作ることが可能。

ただし、前述した**CIDR**に注意。VPCのCIDRで指定したIPアドレスの範囲内でサブネットのCIDRを決める必要がある。

### インターネットゲートウェイ(IGW)

インターネットゲートウェイは、サブネットをインターネット上に通信可能にするための出入り口。

#### ポイント

ここまで、「パブリック」「プライベート」という分けられている点がポイントだと個人的には思う。

基本VPCはプライベートであるため、他社のVPC同士をつなぐことはできないが「VPCピアリング」という機能を用いることで
VPC同士の通信を可能にする。
また、ルーティングはデフォルトではプライベートで通信不可だが「ルーティングテーブル」を書くことで、
HTTP通信、SSH接続などが可能になる。

IGWに接続されているサブネットを「パブリックサブネット」、IGWに接続されていないサブネットを「プライベートサブネット」と呼ぶ。

### NATゲートウェイ

NATとはそもそもNetwork Address Translationの略で、ネットワークアドレスの変換を行うもの。

NATゲートウェイはそのNATの機能をプライベートサブネットにあてがうことでプライベートサブネットと同じように
インターネットに接続できるようになる。

パブリックサブネットは、IGWを使ってインターネットに露出する。

プライベートサブネットは、インターネットに露出したくない情報（社内用APIなど）を置いておくのに便利。

ただ、アクセスされたくないけれど、他のサイトのAPIにアクセスをしたいといったような
**インバウンド**は拒否したいけど**アウトバウンド**はしたい場合に用いるのがNATゲートウェイである。
他の例として、プライベートサブネット内のEC2のOSにパッチを当てるためにDLする、などが挙げられる。

### セキュリティグループ (SCG)

EC2に対するファイアウォール。

EC2から出る通信の**アウトバウンド**とEC2に入る通信の**インバウンド**の設定を行う。

デフォルトは、インバウンドはすべて拒否されるため、必ずSSHやHTTP通信の設定が必要。

### VPCと外部との接続

使用例がオンブレなのでここでは名称だけ紹介。

もしオンプレとAWSを通信することがあったり、AWSとVPNをつなぐことがあればこれらのキーワードで調べると良い。

#### AWS Direct Connect

#### AWS VPN

#### VPC ピアリング

通常ユーザごとに保持されているVPCを相互に接続する機能。

### ELB (Elastic Load Balancing)

主に、EC2へのトラフィックを分散するロードバランサー。

特徴は以下

#### 高可用性

高可用性が効果として挙げられている。
トラフィックを複数のAZで分散できるため、地理的に離れたデータセンターの利用が可能。

特定のAZの障害が発生しても正常なインスタンスとの通信を続けることが可能。

#### オートスケーリング

負荷に応じて自動的にスケーリングする機能を備えている。

#### セキュリティ機能

SSL通信を可能とする機能を保持している。

AWS ACM(AWS Certificate Manager)を利用して証明書発行を行いHTTPSの通信を可能とする。

#### ヘルスチェック

EC2インスタンスが正常に動作しているかヘルスチェックを行う。

### Route53

DNSを提供するサービス。
外部向けDNSの「パブリックホストゾーン」とVPC内部向けの「プライベートホストゾーン」がある。
パブリックホストゾーンを利用して、Webサーバの名前解決に利用して、
プライベートホストゾーンはインターネットを介さない通信の名前解決に利用する。

特徴として、レコードにAWS特有の**ALIASレコード**がある。

AmplifyやELBなどをサービスを指定することでつなぐことができる。

#### ルーティングポリシー

もし試験受けたりがっつりやるひとは、「ルーティングポリシー」を調べると良い。

結論、ルーティングの優先度の付け方にはいくつか方法があって、それらに名前がついているよ、というだけ。

## コンピューティングサービス

### EC2

### Amplify

### その他、オンプレと接続するサービス